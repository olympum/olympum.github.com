<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>mojito | your stuff runs on boths sides - jsconf US 2012 | by Bruno Fernandez-Ruiz @olympum</title>
    
    <meta name="description" content="mojito is a JavaScript library that makes you feel good about progressive enhancement" />
    <meta name="author" content="Bruno Fernandez-Ruiz" />

    <link href="css/fonts.css" type="text/css"  rel="stylesheet" />
    <link href="css/prettify.css" type="text/css" rel="stylesheet" />
    <link href="css/mojito.css" type="text/css"  rel="stylesheet" />
   
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported" onload="prettyPrint()">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress">

    <div id="title" class="step" data-x="0" data-y="0">
        <h1>your <strong>stuff</strong> runs on both sides</h1>
        <p class="try">
            <span><a href="http://twitter.com/olympum">@olympum</a></span>
            <span>#mojito</span>
            <a href="http://2012.jsconf.us/">JSConfUS 2012</a>
        </p>
    </div>

    <div id="broken" class="step" data-x="-4200" data-y="-3300" data-scale="1">
        <p><strong>broken</strong> things</p>
        <p>(yes, we <strong>are</strong> all broken)</p>
    </div>
    <div id="broken-1" class="step" data-x="-6000" data-y="-4000" data-scale="0.5">
        <img src="img/yahoo-js.png" height="640px"/>
    </div>
    <div id="broken-2" class="step" data-x="-6000" data-y="-4000" data-z="-1000" data-scale="0.5">
        <img src="img/yahoo-no-js.png" height="640px"/>
    </div>
    <div id="broken-3" class="step" data-x="-6000" data-y="-4000"data-z="-2000" data-scale="0.5">
        <img src="img/yahoo-music-js.png" height="640px"/>
    </div>
    <div id="broken-4" class="step" data-x="-6000" data-y="-4000" data-z="-3000" data-scale="0.5">
        <img src="img/yahoo-music-no-js.png" height="640px"/>
    </div>

    <div id="how-things-break" class="step slide" data-x="-5400" data-y="-2200">
        <q><strong>always, always, always</strong> assume that
            <strong>JavaScript may not run</strong> on the client,
            because that's exactly what <strong>will</strong> happen.</q>
    </div>

    <div id="nojs" class="step" data-x="-5400" data-rotate-y="90" data-y="-1500">
        <p><span>No</span>JSConf</p>
    </div>

    <div id="why" class="step" data-x="-5400" data-y="-1500" data-scale="1">
        <p>why?</p>
    </div>

    <div id="why-break-1" class="step" data-x="-5400" data-y="-1050" data-scale="1">
        <p>networks</p>
    </div>
    <div id="why-break-2" class="step" data-x="-5400" data-y="-900" data-scale="1">
        <p>packet loss is a reality, especially in emerging countries</p>
    </div>
    <div id="why-break-3" class="step" data-x="-5400" data-y="-750" data-scale="1">
        <p>assume connected devices are only <strong>partially connected</strong></p>
    </div>
    <div id="why-break-4" class="step" data-x="-5400" data-y="-600" data-scale="1">
        <p>spotty reachability is common on mobile networks</p>
    </div>
    <div id="why-break-5" class="step" data-x="-5400" data-y="-450" data-scale="1">
        <p>latency is not constant, 100kb are not 10*10kb</p>
    </div>
    <div id="why-break-6" class="step" data-x="-5400" data-y="-300" data-scale="1">
        <p>mobile</p>
    </div>
    <div id="why-break-7" class="step" data-x="-5400" data-y="-150" data-scale="1">
        <p>almost <strong>6b mobile subscribers</strong> worldwide in 2011</p>
    </div>
    <div id="why-break-8" class="step" data-x="-5400" data-y="0" data-scale="1">
        <p><strong>277m mobile Internet users</strong> in China, 66% of Internet users</p>
    </div>
    <div id="why-break-9" class="step" data-x="-5400" data-y="150" data-scale="1">
        <p>mobile web !== desktop web. mobile devices are only <strong>partially connected</strong></p>
    </div>
    <div id="why-break-10" class="step" data-x="-5400" data-y="300" data-scale="1">
        <p>not just latency limitations: battery life, bandwidth, processor, memory ...</p>
    </div>


    <div id="its" class="step" data-x="850" data-y="3000" data-rotate="90" data-scale="5">
        <p>never, ever, ever assume JavaScript will be available nor fully capable in the client device</p> 
    </div>

    <div id="do-the-right-thing" class="step" data-x="-100" data-y="-700" data-scale="1">
        <q>do the right thing</q>
    </div>

    <div id="penhancement" class="step" data-x="-300" data-y="-600" data-scale="4">
        <q>progressive enhancement</q>
    </div>

    <div class="step" data-x="000" data-y="-2500">
        <img src="img/toothbrush.jpg" width="1000"/>
    </div>

    <div class="step slide" data-x="0" data-y="-1500">
        <q>progressive enhancement should be the <strong>easiest path</strong> of development, it should not need to be harder!</q>
    </div>

    <div class="step slide" data-x="1000" data-y="-1500">
        <q>the Wall between client and server makes progressive enhancement the <strong>hardest path</strong> of development</q>
    </div>

    <div id="document" class="step slide" data-x="-3000" data-y="-3000" data-scale="1">
        <q>our friend the hyper-link</q>
        <pre class="prettyprint">
            <code class="language-html">
&lt;a href="/posts" id="mylink"&gt;all posts&lt;/a&gt;
            </code>
        </pre>
    </div>

    <div id="server-resource" class="step slide" data-x="-2100" data-y="-3000" data-scale="1">
        <q>server-side resource controller</q>
        <pre class="prettyprint">
            <code class="language-ruby">
  def index
    @posts = Post.all
  end
            </code>
        </pre>
    </div>

    <div id="server-template" class="step slide" data-x="-2100" data-y="-2300" data-scale="1">
        <q>server-side template</q>
        <pre class="prettyprint">
            <code class="language-ruby">
&lt;div id="posts"&gt;
&lt;h1&gt;Listing posts&lt;/h1&gt;
 
&lt;ul&gt;
&lt;% @posts.each do |post| %&gt;
    &lt;li&gt;&lt;a href="/posts/&lt;%= post.id %&gt;"&gt;&lt;%= post.title %&gt;&lt;/a&gt;&lt;/li&gt;
&lt;% end %&gt;
&lt;/ul&gt;
&lt;/div&gt;
            </code>
        </pre>
    </div>

    <div id="client-list" class="step slide" data-x="-3000" data-y="-2300" data-scale="1">
        <q>a list of hyper-links</q>
        <pre class="prettyprint">
            <code class="language-html">
&lt;div id="posts"&gt;
&lt;h1&gt;Listing posts&lt;/h1&gt;
 
&lt;ul&gt;
    &lt;li&gt;&lt;a href="/posts/1"&gt;my first post&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="/posts/2"&gt;my second post&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
            </code>
        </pre>
    </div>

    <div id="document-with-js" class="step slide" data-x="-3000" data-y="-1600" data-scale="1">
        <q>JavaScript handler</q>
        <pre class="prettyprint"><code class="language-js">
var handleClick = function(e) { 
    Y.io('/posts', {
        on: {
            complete: function (id, response) {
                // update #posts inner html
            }
        }
    });
}
Y.on("click", handleClick, "mylink");
        </code></pre>
    </div>

    <div id="server-resource-with-json" class="step slide" data-x="-2100" data-y="-1600" data-scale="1">
        <q>server-side handler</q>
        <pre class="prettyprint">
            <code class="language-ruby">
  def index
    @posts = Post.all
    respond_to do |format|
      format.html  # index.html.erb
      format.json  { render :json => @posts }
    end
  end
            </code>
        </pre>
    </div>

    <div id="duplication" class="step" data-x="-3850" data-y="-2910" data-scale="4" data-rotate="-90">
        <q>code duplication</q>
    </div>

    <div id="lazy" class="step" data-x="-3700" data-y="-1700" data-scale="1" data-rotate="-90">
        <p>faced with duplication</p>
    </div>
    <div id="lazy-2" class="step" data-x="-3650" data-y="-1700" data-scale="1" data-rotate="-90">
        <p>developers implement only AJAX</p>
    </div>
    <div id="lazy-3" class="step" data-x="-3600" data-y="-1700" data-scale="1" data-rotate="-90">
        <p>and because networks can break</p>
    </div>
    <div id="lazy-4" class="step" data-x="-3550" data-y="-1700" data-scale="1" data-rotate="-90">
        <p>pages <strong>will</strong> break</p>
    </div>

    <div id="big" class="step" data-x="3500" data-y="2100" data-rotate="0" data-scale="6">
        <p>we <b>must</b> <span class="thoughts">remove <strong>duplication</strong></span></p>
    </div>

    <div id="tiny" class="step" data-x="2825" data-y="2325" data-z="-3000" data-rotate="300" data-scale="1">
        <p>fight duplication: <b>server-side JavaScript</b> to the rescue</p>
    </div>

    <div id="ing" class="step" data-x="3500" data-y="-850" data-rotate="270" data-scale="6">
        <p>we need to make client-side JavaScript and server-side JavaScript be equivalent</p>
    </div>

    <div id="imagination" class="step" data-x="6700" data-y="-300" data-scale="6">
        <p>luckily <b>YUI3</b> does the <b class="imagination">lion's share</b> of the work</p>
    </div>

    <div id="how" class="step" data-x="6300" data-y="2000" data-rotate-y="90" data-scale="4">
        <p>how?</p>
    </div>

    <div id="browser" class="step" data-x="8000" data-y="5000" data-scale="1">
        <p>browser</p>
    </div>
    <div id="DOM" class="step" data-x="8000" data-y="4600" data-scale="1">
        <p>DOM</p>
    </div>
    <div id="JS" class="step" data-x="9000" data-y="4800" data-scale="1">
        <p>JS</p>
    </div>
    <div id="cstuff" class="step" data-x="8500" data-y="4200" data-scale="1">
        <p>client stuff</p>
    </div>
    <div id="client" class="step" data-x="8500" data-y="4500" data-scale="2">
    </div>

    <div id="node" class="step" data-x="10000" data-y="5000" data-scale="1">
        <p>Node.JS</p>
    </div>
    <div id="http" class="step" data-x="10000" data-y="4600" data-scale="1">
        <p>http</p>
    </div>
    <div id="JSV8" class="step" data-x="11000" data-y="4800" data-scale="1">
        <p>JS (V8)</p>
    </div>
    <div id="sstuff" class="step" data-x="10500" data-y="4200" data-scale="1">
        <p>server stuff</p>
    </div>
    <div class="step" data-x="10500" data-y="4500" data-scale="2">
    </div>
    <div class="step" data-x="9500" data-y="5000" data-scale="4">
    </div>

    <div id="wall" class="step" data-x="9500" data-y="2500" data-scale="1">
        <img src="img/Pink-Floyd-The-Wall-classic-rock-1.jpg" />
    </div>

    <div data-x="9500" data-y="2500" data-rotate-y="90" data-scale="1">
    </div>

    <div id="php-js" class="step" data-x="9500" data-y="2500" data-scale="2">
        <p id="cs-js">JavaScript (DOM/strings)</p>
        <p id="cs-php">PHP (strings/DOM)</p>
        <p id="cs-http">HTTP (strings)</p>
    </div>

    <div class="step slide" data-x="12000" data-y="2500" data-rotate-x="90" data-scale="1">
        <q>more than server-side JavaScript:</q>
        <p>☛ <strong>serialization</strong> matters, we are all bits</p>
        <p>☛ a <strong>server-side DOM</strong> does not solve the serialization</p>
        <p>☛ stringify-friendly data serialization format, aka JSON</p>
        <p>☛ memory efficient data transform via <strong>templates</strong></p>
        <p>☛ isolate DOM access to <strong>binders</strong></p>
    </div>

    <div class="step slide" data-x="12000" data-y="2500" data-rotate-x="90" data-rotate-y="90" data-scale="1">
        <q>bring the server to the client</q>
        <p>☛ leverage the client's storage and CPU</p>
        <p>☛ confine expensive DOM operations to the client</p>
        <p>☛ optimize the server for operating with "bits"</p>
        <p>☛ fallback on the server when the client <em>won't</em></p>
        <q><strong>the device is <em>in</em> the cloud</strong></q>
    </div>

    <div id="mvc" class="step slide" data-x="9450" data-y="2500" data-z="-2400" data-rotate-x="90" data-scale="2">
        <q>mojit</q>
    </div>

    <div id="model" class="step" data-x="9000" data-y="2500" data-z="-2000" data-rotate-x="90" data-scale="1">
        <p>model</p>
        <pre class="prettyprint"><code class="language-js">YUI.add('galleryModelFlickr', function(Y) {
// register model in Y.mojito.models namespace.
Y.namespace('mojito.models').gallery = {
    get_photos: function(callback){
      Y.YQL (flickr_query, function(rawYql) {
        if (null == rawYql || 0 == rawYql.query.count) {
          callback ([]);
        } else {
          callback(rawYql.query.results);
        }
      }
    };
}, '0.0.1', {requires: ['yql']});</code></pre>
    </div>

    <div id="view" class="step" data-x="9900" data-y="2500" data-z="-2000" data-rotate-x="90" data-scale="1">
        <p>view</p>
        <pre class="prettyprint"><code>&lt;div&gt;
    &lt;p&gt;The user is from {{country}}.&lt;/p&gt;
&lt;/div&gt;</code></pre>
        <br/>
        <pre><code>index.opera-mini.mu.html
index.iphone.mu.html
index.ipad.mu.html
...</code></pre>
    </div>

    <div id="controller" class="step" data-x="9500" data-y="2500" data-z="-2500" data-rotate-x="90" data-scale="1">
        <p>controller</p>
        <pre class="prettyprint"><code class="language-js">YUI.add('flickr', function(Y) {
  Y.mojito.controller = {
    index: function(ac) {
      var gallery = ac.models.gallery;
      gallery.get_photos (function(photos) {
        ac.done (
          {
            ac.done(photos);
          }
        )'
      });
    }
  };
}, '0.0.1', {requires: []});</code></pre>
    </div>

    <div class="step" data-x="9500" data-y="15000" data-z="-3000" data-rotate-x="90" data-scale="1">
        <p>ActionContext API</p>
        <pre class="prettyprint"><code>ac.models.*.getData();
ac.config.get('key');
ac.params.body('key');
ac.assets.addCss('./style.css');
ac.cookie.set('flavor', 'choco-chip');
ac.http.addHeader('x-foo', 'val');
ac.done('a string');
ac.error('oops');
</code></pre>
    </div>

    <div id="library" class="step slide" data-x="9450" data-y="2500" data-z="-2550" data-rotate-x="90" data-scale="3">
        <p>mojit library</p>
    </div>

    <div id="dispatch" class="step" data-x="7850" data-y="2500" data-z="-2550" data-rotate-x="90" data-scale="1">
        <p>dispatch</p>
    </div>

    <div id="client-dispatch" class="step" data-x="7850" data-y="2500" data-z="-3150" data-rotate-x="90" data-scale="2">
        <p>client</p>
    </div>

    <div id="dom-dispatch" class="step" data-x="7850" data-y="2500" data-z="-3500" data-rotate-x="90" data-scale="1">
        <p>DOM</p>
    </div>

    <div id="binder" class="step" data-x="7850" data-y="2500" data-z="-3300" data-rotate-x="90" data-scale="1">
        <p>Binders</p>
    </div>

    <div id="proxy" class="step" data-x="7850" data-y="2500" data-z="-3100" data-rotate-x="90" data-scale="1">
        <p>Proxy</p>
    </div>

    <div id="server-dispatch" class="step" data-x="7845" data-y="2500" data-z="-1950" data-rotate-x="90" data-scale="2">
        <p>server</p>
    </div>

    <div id="http-dispatch" class="step" data-x="7850" data-y="2500" data-z="-1600" data-rotate-x="90" data-scale="1">
        <p>http</p>
    </div>

    <div id="node-dispatch" class="step" data-x="7850" data-y="2500" data-z="-1800" data-rotate-x="90" data-scale="1">
        <p>Node.JS</p>
    </div>

    <div id="express" class="step" data-x="7850" data-y="2500" data-z="-2000" data-rotate-x="90" data-scale="1">
        <p>Express</p>
    </div>

    <div class="step" data-x="9200" data-y="2500" data-z="-2550" data-rotate-x="90" data-scale="3">
    </div>

<!--

    * Mojito bar.

-->

    <div id="goodness" class="step slide" data-x="-3000" data-y="1500" data-scale="1">
        <q>spread the news</q>
        <p>☛ 100% JavaScript &amp; one codebase</p>
        <p>☛ your stuff runs on both sides</p>
        <p>☛ progressive enhancement, no excuses</p>
        <q>a mouthfull</q>
        <p>☛ partially-connected JavaScript real-time data peers</p>
    </div>

    <div id="next" class="step slide" data-x="-3000" data-y="2500" data-scale="1">
        <q>next steps</q>
        <p>☛ code: <a href="https://github.com/yahoo/mojito">https://github.com/yahoo/mojito</a></p>
        <p>☛ docs: <a href="http://yhoo.it/mojdoc">http://yhoo.it/mojdoc</a></p>
    </div>

    <div id="thankyou" class="step slide" data-x="-3000" data-y="3500" data-scale="1">
        <q>mixology at the mojito bar</q>
		<p>free t-shirt, free mojitos - open today &amp; tomorrow</p>
        <p>talk to y! developers, give mojito a try!</p>
        <p>bonus cocktails: grasshopper &amp; manhattan<p>
		<p>shaker talk tomorrow by Julien Lecomte</p>
    </div>

    <div id="overview" class="step" data-x="3000" data-y="1500" data-scale="16">
    </div>

</div>

<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/prettify.js"></script> 
<script src="js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>
